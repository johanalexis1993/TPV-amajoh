requestIdleCallback(()=>{const n=(t,e)=>{const s=document.querySelector(`#${e}`);if(!s)return;const r=t.value===s.value;t.setCustomValidity(r?"":"Las contraseñas deben coincidir."),t.style.borderColor=r?"green":"red",r||(t.dataset.alertShown?t.dataset.alertShown="false":(alert("Las contraseñas no coinciden, rectifícalas."),t.dataset.alertShown="true"))},l=(t,e)=>{const s=document.querySelector(`#${t}`);s&&s.addEventListener("blur",()=>n(s,e))};l("confirmPasswordReservation","password"),l("confirmPassword","contraseña"),l("confirmarPassword","password"),document.querySelector("#creditCard").addEventListener("input",function(){this.value.length>16&&(this.value=this.value.slice(0,16))}),document.querySelector("#cvv").addEventListener("input",function(){this.value.length>3&&(this.value=this.value.slice(0,3))});const o=document.querySelectorAll("form"),i="input[required], textarea[required], select[required]",c='button[type="submit"], button[disabled]';o.forEach(t=>{const e=t.querySelectorAll(i),s=()=>{const r=Array.from(e).every(u=>u.value.trim()!==""),a=t.querySelector(c);a&&(a.disabled=!r)};e.forEach(r=>{const a=()=>{r.classList.toggle("input-valid",r.value.trim()!==""),s()};r.addEventListener("input",a),r.addEventListener("change",a),r.addEventListener("blur",a)})});const d=["Muy débil","Débil","Aceptable","Fuerte","Muy fuerte"];document.querySelectorAll('input[type="password"]').forEach(t=>{let e=null,s=null;t.addEventListener("focus",()=>{e||(e=document.createElement("meter"),e.className="password-strength-element",e.min=0,e.max=4,e.low=1,e.high=3,e.optimum=4,e.value=0,t.parentElement.append(e)),s||(s=document.createElement("small"),s.className="password-strength-element",t.parentElement.append(s)),e.classList.add("password-strength-visible"),s.classList.add("password-strength-visible")}),t.addEventListener("blur",()=>{e&&s&&(e.classList.remove("password-strength-visible"),s.classList.remove("password-strength-visible"))}),t.addEventListener("input",()=>{if(!e||!s)return;const r=t.value;let a=0;r.length>5&&a++,/[A-Z]/.test(r)&&a++,/[0-9]/.test(r)&&a++,/[^A-Za-z0-9]/.test(r)&&a++,e.value=a,s.textContent=d[a]})})});
